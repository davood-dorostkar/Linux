import os
import argparse
import shutil


def remove_path(path):
    try:
        if os.path.isfile(path) or os.path.islink(path):
            os.remove(path)
            print(f"Removed file or symlink: {path}")
        elif os.path.isdir(path):
            shutil.rmtree(path)
            print(f"Removed directory: {path}")
        else:
            print(f"Path does not exist or is not removable: {path}")
    except Exception as e:
        print(f"Error removing {path}: {e}")


def remove_list(path_list):
    for path in path_list:
        remove_path(path)


def read_file(path):
    try:
        with open(path, "r") as file:
            lines = file.readlines()
            lines = [line.strip() for line in lines]
            return lines
    except Exception as e:
        print(f"Error reading file {path}: {e}")
        return []


if __name__ == "__main__":
    parser = argparse.ArgumentParser()
    parser.add_argument("args", nargs="*")
    args = parser.parse_args()

    for arg in args.args:
        print(f"Processing file: {arg}")
        paths = read_file(arg)
        remove_list(paths)
